<!doctype html><html lang=en-us><head><meta http-equiv=x-clacks-overhead content="GNU Terry Pratchett"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Ownership and Borrowing in Rust | Daniel Correia</title><meta name=title content="Ownership  and Borrowing in Rust"><meta name=description content="Ownership and Borrowing in Rust Ownership The Book1 states the following as the three rules of ownership in Rust:
Each value in Rust has an owner. There can only be one owner at a time. When the owner goes out of scope, the value will be dropped. Going out of scope essentially means coming to the end of the trailing curly brace &lsquo;}&rsquo; of the one in which a value was introduced in."><meta name=keywords content="Rust,"><meta property="og:title" content="Ownership  and Borrowing in Rust"><meta property="og:description" content="Ownership and Borrowing in Rust Ownership The Book1 states the following as the three rules of ownership in Rust:
Each value in Rust has an owner. There can only be one owner at a time. When the owner goes out of scope, the value will be dropped. Going out of scope essentially means coming to the end of the trailing curly brace &lsquo;}&rsquo; of the one in which a value was introduced in."><meta property="og:type" content="article"><meta property="og:url" content="https://danreia.github.io/til/rust/ownership/"><meta property="article:section" content="til"><meta property="article:published_time" content="2023-09-12T10:52:47+02:00"><meta property="article:modified_time" content="2023-09-12T10:52:47+02:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Ownership  and Borrowing in Rust"><meta name=twitter:description content="Ownership and Borrowing in Rust Ownership The Book1 states the following as the three rules of ownership in Rust:
Each value in Rust has an owner. There can only be one owner at a time. When the owner goes out of scope, the value will be dropped. Going out of scope essentially means coming to the end of the trailing curly brace &lsquo;}&rsquo; of the one in which a value was introduced in."><meta itemprop=name content="Ownership  and Borrowing in Rust"><meta itemprop=description content="Ownership and Borrowing in Rust Ownership The Book1 states the following as the three rules of ownership in Rust:
Each value in Rust has an owner. There can only be one owner at a time. When the owner goes out of scope, the value will be dropped. Going out of scope essentially means coming to the end of the trailing curly brace &lsquo;}&rsquo; of the one in which a value was introduced in."><meta itemprop=datePublished content="2023-09-12T10:52:47+02:00"><meta itemprop=dateModified content="2023-09-12T10:52:47+02:00"><meta itemprop=wordCount content="321"><meta itemprop=keywords content="Rust,"><meta name=referrer content="no-referrer-when-downgrade"><style>body{font-family:Verdana,sans-serif;margin:auto;padding:20px;max-width:720px;text-align:left;background-color:#fff;word-wrap:break-word;overflow-wrap:break-word;line-height:1.5;color:#444}h1,h2,h3,h4,h5,h6,strong,b{color:#222}a{color:#3273dc}.title{text-decoration:none;border:0}.title span{font-weight:400}nav a{margin-right:10px}textarea{width:100%;font-size:16px}input{font-size:16px}content{line-height:1.6}table{width:100%}img{max-width:100%}code{padding:2px 5px;background-color:#f2f2f2}pre code{color:#222;display:block;padding:20px;white-space:pre-wrap;font-size:14px;overflow-x:auto}div.highlight pre{background-color:initial;color:initial}div.highlight code{background-color:unset;color:unset}blockquote{border-left:1px solid #999;color:#222;padding-left:20px;font-style:italic}footer{padding:25px;text-align:center}.helptext{color:#777;font-size:small}.errorlist{color:#eba613;font-size:small}ul.blog-posts{list-style-type:none;padding:unset}ul.blog-posts li{display:flex}ul.blog-posts li span{flex:0 0 130px}ul.blog-posts li a:visited{color:#8b6fcb}@media(prefers-color-scheme:dark){body{background-color:#333;color:#ddd}h1,h2,h3,h4,h5,h6,strong,b{color:#eee}a{color:#8cc2dd}code{background-color:#777}pre code{color:#ddd}blockquote{color:#ccc}textarea,input{background-color:#252525;color:#ddd}.helptext{color:#aaa}}</style><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.13.0/dist/katex.min.css integrity=sha384-t5CR+zwDAROtph0PXGte6ia8heboACF9R5l/DiY+WZ3P2lxNgvJkQk5n7GPvLMYw crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.13.0/dist/katex.min.js integrity=sha384-FaFLTlohFghEIZkw6VGwmf9ISTubWAVYW8tG8+w2LAIftJEULZABrF9PPFv+tVkH crossorigin=anonymous></script>
<script>window.myDelimiters=[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}]</script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.13.0/dist/contrib/auto-render.min.js integrity=sha384-bHBqxz8fokvgoJ/sc17HODNxa42TlaEhB+w8ZJXTc2nZf1VgEaFZeZvT4Mznfz0v crossorigin=anonymous onload=renderMathInElement(document.body,{delimiters:window.myDelimiters})></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-1QYYLEKTYF"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-1QYYLEKTYF")</script><script>(function(e,t,n,s,o){e[s]=e[s]||[],e[s].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var a=t.getElementsByTagName(n)[0],i=t.createElement(n),r=s!="dataLayer"?"&l="+s:"";i.async=!0,i.src="https://www.googletagmanager.com/gtm.js?id="+o+r,a.parentNode.insertBefore(i,a)})(window,document,"script","dataLayer","GTM-5ZQLJT5")</script></head><body><header><a href=/ class=title><h2>Daniel Correia</h2></a><nav><a href=/>Home</a>
<a href=/til/>TIL</a>
<a href=/projects/>Projects</a>
<a href=/about/>About</a>
<a href=/contact/>Contact</a></nav></header><main><content><h1 id=ownership-and-borrowing-in-rust>Ownership and Borrowing in Rust</h1><h2 id=ownership>Ownership</h2><p>The Book<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup> states the following as the three rules of ownership in Rust:</p><ol><li>Each value in Rust has an owner.</li><li>There can only be one owner at a time.</li><li>When the owner goes out of scope, the value will be dropped.</li></ol><p>Going out of scope essentially means coming to the end of the trailing curly brace &lsquo;}&rsquo; of the one in which a value was introduced in.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> s <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;hi&#34;</span>;
</span></span><span style=display:flex><span>} <span style=color:#75715e>// Goes out of scope here
</span></span></span></code></pre></div><p>To prevent double ownership, Rust introduces the concept of a <code>move</code> that invalidates ownership if it is referenced by another.
Moving a variable essentially makes a shallow copy of the data whilst invalidating the original.</p><p>A secondary way of preventing multiple ownership is to copy data:</p><ul><li>Clone Trait: deep and expensive copy of heap data</li><li>Copy Trait: cheap copy of stack data, variables that use it do not move.</li></ul><h2 id=borrowing>Borrowing</h2><p>A value in Rust is borrowed through referencing, a special type of pointer that can refer to the underlying data of a value without taking ownership.</p><p>Rust has mutable and immutable references to indicate if the underlying borrowed data can be mutated or not:</p><ul><li>If you have a mutable reference to a value you cannot have any other references to that value.<ul><li>At least simultaneous ones. A nuance here is that a reference scope lasts from where it was introduced up until where the reference is last used, not necessarily the end of the function scope.</li></ul></li><li>You can have any number of simultaneous immutable references.</li></ul><p>Slices are essentially references that let you refer to a range of data. Slices are essentially pointers storing and index and a length.
Being a type of reference they too do not take ownership</p><p>Interesting aside: string literals <code>let s: &amp;str = "hi";</code> are slices of the binary, pointing to an index in the binary with an associated length.</p><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p><a href=https://doc.rust-lang.org/book/ch04-01-what-is-ownership.html>The Book</a>&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></content><p><a href=https://danreia.github.io/tags/rust/>#Rust</a></p></main><footer>Made with <a href=https://github.com/janraasch/hugo-bearblog/>Hugo ʕ•ᴥ•ʔ Bear</a></footer><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5ZQLJT5" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript></body></html>